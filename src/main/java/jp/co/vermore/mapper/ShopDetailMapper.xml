<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jp.co.vermore.mapper.ShopDetailMapper" >
  <resultMap id="ShopDetailResult" type="jp.co.vermore.entity.ShopDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 12 10:56:27 CST 2018.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="shop_type" property="shopType" jdbcType="INTEGER" />
    <result column="shop_list_id" property="shopListId" jdbcType="BIGINT" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="pic_url1" property="picUrl1" jdbcType="VARCHAR" />
    <result column="pic_url2" property="picUrl2" jdbcType="VARCHAR" />
    <result column="pic_url3" property="picUrl3" jdbcType="VARCHAR" />
    <result column="pic_url4" property="picUrl4" jdbcType="VARCHAR" />
    <result column="pic_url5" property="picUrl5" jdbcType="VARCHAR" />
    <result column="pic_url6" property="picUrl6" jdbcType="VARCHAR" />
    <result column="video_url" property="videoUrl" jdbcType="VARCHAR" />
    <result column="title" property="title" jdbcType="VARCHAR" />
    <result column="desc1" property="desc1" jdbcType="VARCHAR" />
    <result column="desc2" property="desc2" jdbcType="VARCHAR" />
    <result column="desc3" property="desc3" jdbcType="VARCHAR" />
    <result column="desc4" property="desc4" jdbcType="VARCHAR" />
    <result column="desc5" property="desc5" jdbcType="VARCHAR" />
    <result column="desc6" property="desc6" jdbcType="VARCHAR" />
    <result column="desc7" property="desc7" jdbcType="VARCHAR" />
    <result column="desc8" property="desc8" jdbcType="VARCHAR" />
    <result column="desc9" property="desc9" jdbcType="VARCHAR" />
    <result column="desc10" property="desc10" jdbcType="VARCHAR" />
    <result column="desc11" property="desc11" jdbcType="VARCHAR" />
    <result column="desc12" property="desc12" jdbcType="VARCHAR" />
    <result column="desc13" property="desc13" jdbcType="VARCHAR" />
    <result column="desc14" property="desc14" jdbcType="VARCHAR" />
    <result column="desc15" property="desc15" jdbcType="VARCHAR" />
    <result column="desc16" property="desc16" jdbcType="VARCHAR" />
    <result column="desc17" property="desc17" jdbcType="VARCHAR" />
    <result column="desc18" property="desc18" jdbcType="VARCHAR" />
    <result column="desc19" property="desc19" jdbcType="VARCHAR" />
    <result column="desc20" property="desc20" jdbcType="VARCHAR" />
    <result column="desc21" property="desc21" jdbcType="VARCHAR" />
    <result column="desc22" property="desc22" jdbcType="VARCHAR" />
    <result column="desc23" property="desc23" jdbcType="VARCHAR" />
    <result column="desc24" property="desc24" jdbcType="VARCHAR" />
    <result column="desc25" property="desc25" jdbcType="VARCHAR" />
    <result column="desc26" property="desc26" jdbcType="VARCHAR" />
    <result column="desc27" property="desc27" jdbcType="VARCHAR" />
    <result column="desc28" property="desc28" jdbcType="VARCHAR" />
    <result column="desc29" property="desc29" jdbcType="VARCHAR" />
    <result column="desc30" property="desc30" jdbcType="VARCHAR" />
    <result column="desc31" property="desc31" jdbcType="VARCHAR" />
    <result column="desc32" property="desc32" jdbcType="VARCHAR" />
    <result column="desc33" property="desc33" jdbcType="VARCHAR" />
    <result column="desc34" property="desc34" jdbcType="VARCHAR" />
    <result column="desc35" property="desc35" jdbcType="VARCHAR" />
    <result column="desc36" property="desc36" jdbcType="VARCHAR" />
    <result column="desc37" property="desc37" jdbcType="VARCHAR" />
    <result column="desc38" property="desc38" jdbcType="VARCHAR" />
    <result column="desc39" property="desc39" jdbcType="VARCHAR" />
    <result column="desc40" property="desc40" jdbcType="VARCHAR" />
    <result column="tel" property="tel" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="now5" property="now5" jdbcType="VARCHAR" />
    <result column="publish_start" property="publishStart" jdbcType="TIMESTAMP" />
    <result column="publish_end" property="publishEnd" jdbcType="TIMESTAMP" />
    <result column="create_datetime" property="createDatetime" jdbcType="TIMESTAMP" />
    <result column="update_datetime" property="updateDatetime" jdbcType="TIMESTAMP" />
    <result column="del_flg" property="delFlg" jdbcType="BIT" />
    <result column="note" property="note" jdbcType="VARCHAR" />
  </resultMap>

  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Mar 12 10:56:27 CST 2018.
    -->
    id, shop_type,shop_list_id, name, pic_url1, pic_url2, pic_url3, pic_url4, pic_url5,pic_url6,
    video_url, title, desc1, desc2 , desc3 , desc4 , desc5 , desc6 , desc7 , desc8 , desc9 , desc10 , desc11 , desc12 , desc13 , desc14 , desc15 ,
    desc16 , desc17 , desc18 , desc19 , desc20 , desc21 , desc22 , desc23 , desc24 , desc25 , desc26 , desc27 , desc28 , desc29 , desc30 , desc31 , desc32 , desc33 ,
    desc34 , desc35 , desc36 , desc37 , desc38 , desc39, desc40 ,tel, address, now5,
    publish_start, publish_end, create_datetime, update_datetime, del_flg, note
  </sql>

  <select id="getShopDetailJsonAll" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where shop_list_id = #{shopListId} AND del_flg = 0
  </select>

  <select id="getShopDetailAll" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where  del_flg = 0
  </select>

  <select id="getShopType" resultType="Integer">
    select
    shop_type
    from shop_detail
    where shop_list_id = #{shopListId} AND del_flg = 0
  </select>

  <select id="getShopListId" resultType="Long">
    select
    shop_list_id
    from shop_detail
    where id = #{id} AND del_flg = 0
  </select>

  <select id="getShopDetailId" resultType="Long">
    select
    id
    from shop_detail
    where shop_list_id = #{shopListId} AND del_flg = 0
  </select>

  <select id="getShopDetailIdList" resultType="Long">
    select
    id
    from shop_detail
    where del_flg = 0
    and shop_list_id in
    <foreach collection="list" item="ent" separator="," open="(" close=")">
      #{ent}
    </foreach>
  </select>

  <select id="getShopListAdmin" resultMap="ShopDetailResult">
    select
    id,shop_list_id,shop_type,name,title,tel,address
    from shop_detail
    where del_flg = 0
  </select>

  <select id="getShopDetailById" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where del_flg = 0
    and id = #{id}
  </select>

  <select id="getShopDetailByNowGo" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where del_flg = 0
    and now5 !="" || now5 != null
    order by update_datetime desc
  </select>

  <select id="getShopDetailListById" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where del_flg = 0
    and id in
    <foreach collection="idList" item="ent" separator="," open="(" close=")">
      #{ent,jdbcType=long}
    </foreach>
  </select>

  <select id="getShopDetailByShopId" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where del_flg = 0
    and shop_list_id = #{id}
  </select>

  <select id="getShopDetailByShopIdList" resultMap="ShopDetailResult">
    select
    <include refid="Base_Column_List" />
    from shop_detail
    where del_flg = 0
    and shop_list_id in
    <foreach collection="list" item="ent" separator="," open="(" close=")">
      #{ent}
    </foreach>
  </select>

  <insert id="insertShopDetail">
    insert into shop_detail(
    <if test="shopType != null" >
    shop_type,
    </if>
    <if test="shopListId != null" >
    shop_list_id,
    </if>
    <if test="name != null" >
    `name`,
    </if>
    <if test="title != null" >
    title,
    </if>
    <if test="desc1 != null" >
    desc1,
    </if>
    <if test="desc2 != null" >
    desc2,
    </if>
    <if test="desc3 != null" >
    desc3,
    </if>
    <if test="desc4 != null" >
    desc4,
    </if>
    <if test="desc5 != null" >
    desc5,
    </if>
    <if test="desc6 != null" >
    desc6,
    </if>
    <if test="desc7 != null" >
    desc7,
    </if>
    <if test="desc8 != null" >
    desc8,
    </if>
    <if test="desc9 != null" >
    desc9,
    </if>
    <if test="desc10 != null" >
    desc10,
    </if>
    <if test="desc11 != null" >
    desc11,
    </if>
    <if test="desc12 != null" >
    desc12,
    </if>
    <if test="desc13 != null" >
    desc13,
    </if>
    <if test="desc14 != null" >
    desc14,
    </if>
    <if test="desc15 != null" >
    desc15,
    </if>
    <if test="desc16 != null" >
    desc16,
    </if>
    <if test="desc17 != null" >
    desc17,
    </if>
    <if test="desc18 != null" >
    desc18,
    </if>
    <if test="desc19 != null" >
    desc19,
    </if>
    <if test="desc20 != null" >
    desc20,
    </if>
    <if test="desc21 != null" >
    desc21,
    </if>
    <if test="desc22 != null" >
    desc22,
    </if>
    <if test="desc23 != null" >
    desc23,
    </if>
    <if test="desc24 != null" >
    desc24,
    </if>
    <if test="desc25 != null" >
    desc25,
    </if>
    <if test="desc26 != null" >
    desc26,
    </if>
    <if test="desc27 != null" >
    desc27,
    </if>
    <if test="desc28 != null" >
    desc28,
    </if>
    <if test="desc29 != null" >
    desc29,
    </if>
    <if test="desc30 != null" >
    desc30,
    </if>
    <if test="desc31 != null" >
    desc31,
    </if>
    <if test="desc32 != null" >
    desc32,
    </if>
    <if test="desc33 != null" >
    desc33,
    </if>
    <if test="desc34 != null" >
    desc34,
    </if>
    <if test="desc35 != null" >
    desc35,
    </if>
    <if test="desc36 != null" >
    desc36,
    </if>
    <if test="desc37 != null" >
    desc37,
    </if>
    <if test="desc38 != null" >
    desc38,
    </if>
    <if test="desc39 != null" >
    desc39,
    </if>
    <if test="desc40 != null" >
    desc40,
    </if>
    <if test="tel != null" >
    tel,
    </if>
    <if test="address != null" >
    address,
    </if>
    <if test="picUrl1 != null" >
    pic_url1,
    </if>
    <if test="picUrl2 != null" >
    pic_url2,
    </if>
    <if test="picUrl3 != null" >
    pic_url3,
    </if>
    <if test="picUrl4 != null" >
    pic_url4,
    </if>
    <if test="picUrl5!= null" >
    pic_url5,
    </if>
    <if test="picUrl6 != null" >
    pic_url6,
    </if>
    <if test="videoUrl != null" >
    video_url,
    </if>
    <if test="createDatetime != null" >
    create_datetime,
    </if>
    <if test="updateDatetime != null" >
    update_datetime,
    </if>
    <if test="delFlg != null" >
    del_flg,
    </if>
    <if test="note != null" >
    note
    </if>
    ) values (
    <if test="shopType != null" >
    #{shopType},
    </if>
    <if test="shopListId != null" >
    #{shopListId},
    </if>
    <if test="name != null" >
    #{name},
    </if>
    <if test="title != null" >
    #{title},
    </if>
    <if test="desc1 != null" >
    #{desc1},
    </if>
    <if test="desc2 != null" >
    #{desc2},
    </if>
    <if test="desc3 != null" >
    #{desc3},
    </if>
    <if test="desc4 != null" >
    #{desc4},
    </if>
    <if test="desc5 != null" >
    #{desc5},
    </if>
    <if test="desc6 != null" >
    #{desc6},
    </if>
    <if test="desc7 != null" >
    #{desc7},
    </if>
    <if test="desc8 != null" >
    #{desc8},
    </if>
    <if test="desc9 != null" >
    #{desc9},
    </if>
    <if test="desc10 != null" >
    #{desc10},
    </if>
    <if test="desc11 != null" >
    #{desc11},
    </if>
    <if test="desc12 != null" >
    #{desc12},
    </if>
    <if test="desc13 != null" >
    #{desc13},
    </if>
    <if test="desc14 != null" >
    #{desc14},
    </if>
    <if test="desc15 != null" >
    #{desc15},
    </if>
    <if test="desc16 != null" >
    #{desc16},
    </if>
    <if test="desc17 != null" >
    #{desc17},
    </if>
    <if test="desc18 != null" >
    #{desc18},
    </if>
    <if test="desc19 != null" >
    #{desc19},
    </if>
    <if test="desc20 != null" >
    #{desc20},
    </if>
    <if test="desc21 != null" >
    #{desc21},
    </if>
    <if test="desc22 != null" >
    #{desc22},
    </if>
    <if test="desc23 != null" >
    #{desc23},
    </if>
    <if test="desc24 != null" >
    #{desc24},
    </if>
    <if test="desc25 != null" >
    #{desc25},
    </if>
    <if test="desc26 != null" >
    #{desc26},
    </if>
    <if test="desc27 != null" >
    #{desc27},
    </if>
    <if test="desc28 != null" >
    #{desc28},
    </if>
    <if test="desc29 != null" >
    #{desc29},
    </if>
    <if test="desc30 != null" >
    #{desc30},
    </if>
    <if test="desc31 != null" >
    #{desc31},
    </if>
    <if test="desc32 != null" >
    #{desc32},
    </if>
    <if test="desc33 != null" >
    #{desc33},
    </if>
    <if test="desc34 != null" >
    #{desc34},
    </if>
    <if test="desc35 != null" >
    #{desc35},
    </if>
    <if test="desc36 != null" >
    #{desc36},
    </if>
    <if test="desc37 != null" >
    #{desc37},
    </if>
    <if test="desc38 != null" >
    #{desc38},
    </if>
    <if test="desc39 != null" >
    #{desc39},
    </if>
    <if test="desc40 != null" >
    #{desc40},
    </if>
    <if test="tel != null" >
    #{tel},
    </if>
    <if test="address != null" >
    #{address},
    </if>
    <if test="picUrl1 != null" >
    #{picUrl1},
    </if>
    <if test="picUrl2 != null" >
    #{picUrl2},
    </if>
    <if test="picUrl3 != null" >
    #{picUrl3},
    </if>
    <if test="picUrl4 != null" >
    #{picUrl4},
    </if>
    <if test="picUrl5 != null" >
    #{picUrl5},
    </if>
    <if test="picUrl6 != null" >
    #{picUrl6},
    </if>
    <if test="videoUrl != null" >
    #{videoUrl},
    </if>
    <if test="createDatetime != null" >
    #{createDatetime},
    </if>
    <if test="updateDatetime != null" >
    #{updateDatetime},
    </if>
    <if test="delFlg != null" >
    #{delFlg},
    </if>
    <if test="note != null" >
    #{note}
    </if>
    )
    <selectKey resultType="long" keyProperty="id" order="AFTER">
      select @@IDENTITY
    </selectKey>
  </insert>

  <update id="updateShopDetail">
    update shop_detail
    set
    <if test="shopListId != null" >
    shop_list_id = #{shopListId},
    </if>
    <if test="name != null" >
    name = #{name},
    </if>
    <if test="title != null" >
    title = #{title},
    </if>
    <if test="desc1 != null" >
    desc1 = #{desc1},
    </if>
    <if test="desc2 != null" >
    desc2 = #{desc2},
    </if>
    <if test="desc3 != null" >
    desc3 = #{desc3},
    </if>
    <if test="desc4 != null" >
    desc4 = #{desc4},
    </if>
    <if test="desc5 != null" >
    desc5 = #{desc5},
    </if>
    <if test="desc6 != null" >
    desc6 = #{desc6},
    </if>
    <if test="desc7 != null" >
    desc7 = #{desc7},
    </if>
    <if test="desc8 != null" >
    desc8 = #{desc8},
    </if>
    <if test="desc9 != null" >
    desc9 = #{desc9},
    </if>
    <if test="desc10 != null" >
    desc10 = #{desc10},
    </if>
    <if test="desc11 != null" >
    desc11 = #{desc11},
    </if>
    <if test="desc12 != null" >
    desc12 = #{desc12},
    </if>
    <if test="id != null" >
    desc13 = #{desc13},
    </if>
    <if test="desc14 != null" >
    desc14 = #{desc14},
    </if>
    <if test="desc15 != null" >
    desc15 = #{desc15},
    </if>
    <if test="desc16 != null" >
    desc16 = #{desc16},
    </if>
    <if test="desc17 != null" >
    desc17 = #{desc17},
    </if>
    <if test="desc18 != null" >
    desc18 = #{desc18},
    </if>
    <if test="desc19 != null" >
    desc19 = #{desc19},
    </if>
    <if test="desc20 != null" >
    desc20 = #{desc20},
    </if>
    <if test="desc21 != null" >
    desc21 = #{desc21},
    </if>
    <if test="desc22 != null" >
    desc22 = #{desc22},
    </if>
    <if test="desc23 != null" >
    desc23 = #{desc23},
    </if>
    <if test="desc24 != null" >
    desc24 = #{desc24},
    </if>
    <if test="desc25 != null" >
    desc25 = #{desc25},
    </if>
    <if test="desc26 != null" >
    desc26 = #{desc26},
    </if>
    <if test="desc27 != null" >
    desc27 = #{desc27},
    </if>
    <if test="desc28 != null" >
    desc28 = #{desc28},
    </if>
    <if test="desc29 != null" >
    desc29 = #{desc29},
    </if>
    <if test="desc30 != null" >
    desc30 = #{desc30},
    </if>
    <if test="desc31 != null" >
    desc31 = #{desc31},
    </if>
    <if test="desc32 != null" >
    desc32 = #{desc32},
    </if>
    <if test="desc33 != null" >
    desc33 = #{desc33},
    </if>
    <if test="desc34 != null" >
    desc34 = #{desc34},
    </if>
    <if test="desc35 != null" >
    desc35 = #{desc35},
    </if>
    <if test="desc36 != null" >
    desc36 = #{desc36},
    </if>
    <if test="desc37 != null" >
    desc37 = #{desc37},
    </if>
    <if test="desc38 != null" >
    desc38 = #{desc38},
    </if>
    <if test="desc39 != null" >
    desc39 = #{desc39},
    </if>
    <if test="desc40 != null" >
    desc40 = #{desc40},
    </if>
    <if test="tel != null" >
    tel = #{tel},
    </if>
    <if test="now5 != null" >
    now5 = #{now5,jdbcType=VARCHAR},
    </if>
    <if test="address != null" >
    address = #{address},
    </if>
    <if test="picUrl1 != null" >
    pic_url1 = #{picUrl1},
    </if>
    <if test="picUrl2 != null" >
    pic_url2 = #{picUrl2},
    </if>
    <if test="picUrl3 != null" >
    pic_url3 = #{picUrl3},
    </if>
    <if test="picUrl4 != null" >
    pic_url4 = #{picUrl4},
    </if>
    <if test="picUrl5 != null" >
    pic_url5 = #{picUrl5},
    </if>
    <if test="picUrl6 != null" >
    pic_url6 = #{picUrl6},
    </if>
    <if test="videoUrl != null" >
    video_url =#{videoUrl},
    </if>
    <if test="createDatetime != null" >
    create_datetime = #{createDatetime},
    </if>
    <if test="updateDatetime != null" >
    update_datetime = #{updateDatetime},
    </if>
    <if test="delFlg != null" >
    del_flg = #{delFlg},
    </if>
    <if test="note != null" >
    note = #{note}
    </if>
    where id = #{id}
  </update>

  <update id="deleteShopDetail">
    update shop_detail set del_flg = 1 where shop_list_id = #{shopListId}
  </update>

  <update id="deleteShopDetailVideo">
    update shop_detail set video_url = "" where shop_list_id = #{shopListId}
  </update>

  <update id="deleteShopDetailFlic">
    update shop_detail set pic_url6 = "" where shop_list_id = #{shopListId}
  </update>

</mapper>